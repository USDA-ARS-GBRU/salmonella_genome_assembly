process {
    // Default executor for all processes unless overridden
    executor = 'slurm'

    // Resource allocation for the new adapter filtering process
    withName: ADAPTER_FILT {
        clusterOptions = '-A gbru -q atlas -N 1 -n 12'
        cpus = 12
        time = '1h'
    }

    withName: HIFIASM {
        clusterOptions = '-A gbru -q atlas -N 1 -n 24'
        cpus = 24
        time = '12h'
    }

    // Runs on the head node
    withName: ORIENTATION {
        executor = 'local'
    }
}

apptainer {
    enabled = true
    autoMounts = true
    // Store images here to avoid re-downloading every run
    cacheDir = 'apptainer_cache'
    
    // Ensures containers can write to system temp directories if needed
    runOptions = '-C -H $PWD'
}
